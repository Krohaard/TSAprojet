var U=Object.defineProperty;var i=(C,v)=>U(C,"name",{value:v,configurable:!0});import{ag as j,a as z,s as V,w as F,af as q,ae as y,x as k,r as I,M as H}from"./vendor-primevue-D4_dEx5Z.js";import{Z as L,u as P,d0 as Z,c_ as G}from"./index-UkVvUXbW.js";import{bs as J,r as m,H as b,o as K,c as u,p,q as r,A as o,bq as t,e as f,d as S,F as Q,z as W,t as h,h as _,s as X}from"./vendor-other-CcUSxTdr.js";import"./vendor-vue-BFtl7jfJ.js";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"./vendor-tiptap-BLQhG9Oo.js";const Y={class:"flex justify-end"},ee={class:"mb-3 flex gap-2"},de=J({__name:"ExtensionPanel",setup(C){const v=["All","Core","Custom"],E=m("All"),c=m([]),x=m({global:{value:"",matchMode:j.CONTAINS}}),a=L(),$=P(),l=m({}),A=b(()=>{const e=a.extensions;switch(E.value){case"Core":return e.filter(s=>a.isCoreExtension(s.name));case"Custom":return e.filter(s=>!a.isCoreExtension(s.name));default:return e}});K(()=>{a.extensions.forEach(e=>{l.value[e.name]=a.isExtensionEnabled(e.name)})});const g=b(()=>a.extensions.filter(e=>l.value[e.name]!==a.isExtensionEnabled(e.name))),N=b(()=>g.value.length>0),d=i(async()=>{const e=Object.entries(l.value).filter(([s,n])=>!n).map(([s])=>s);await $.set("Comfy.Extension.Disabled",[...a.inactiveDisabledExtensionNames,...e])},"updateExtensionStatus"),D=i(async()=>{a.extensions.forEach(e=>{a.isExtensionReadOnly(e.name)||(l.value[e.name]=!0)}),await d()},"enableAllExtensions"),O=i(async()=>{a.extensions.forEach(e=>{a.isExtensionReadOnly(e.name)||(l.value[e.name]=!1)}),await d()},"disableAllExtensions"),T=i(async()=>{a.extensions.forEach(e=>{a.isCoreExtension(e.name)||(l.value[e.name]=!1)}),await d()},"disableThirdPartyExtensions"),M=i(()=>{window.location.reload()},"applyChanges"),w=m(),B=[{label:"Enable Selected",icon:"pi pi-check",command:i(async()=>{c.value.forEach(e=>{a.isExtensionReadOnly(e.name)||(l.value[e.name]=!0)}),await d()},"command")},{label:"Disable Selected",icon:"pi pi-times",command:i(async()=>{c.value.forEach(e=>{a.isExtensionReadOnly(e.name)||(l.value[e.name]=!1)}),await d()},"command")},{separator:!0},{label:"Enable All",icon:"pi pi-check",command:D},{label:"Disable All",icon:"pi pi-times",command:O},{label:"Disable 3rd Party",icon:"pi pi-times",command:T,disabled:!a.hasThirdPartyExtensions}];return(e,s)=>(u(),p(G,{value:"Extension",class:"extension-panel"},{header:r(()=>[o(Z,{modelValue:x.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=n=>x.value.global.value=n),placeholder:e.$t("g.searchExtensions")+"..."},null,8,["modelValue","placeholder"]),N.value?(u(),p(t(z),{key:0,severity:"info","pt:text":"w-full",class:"max-h-96 overflow-y-auto"},{default:r(()=>[f("ul",null,[(u(!0),S(Q,null,W(g.value,n=>(u(),S("li",{key:n.name},[f("span",null,h(t(a).isExtensionEnabled(n.name)?"[-]":"[+]"),1),_(" "+h(n.name),1)]))),128))]),f("div",Y,[o(t(V),{label:e.$t("g.reloadToApplyChanges"),outlined:"",severity:"danger",onClick:M},null,8,["label"])])]),_:1})):X("",!0)]),default:r(()=>[f("div",ee,[o(t(F),{modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=n=>E.value=n),options:v},null,8,["modelValue"])]),o(t(q),{selection:c.value,"onUpdate:selection":s[3]||(s[3]=n=>c.value=n),value:A.value,"striped-rows":"",size:"small",filters:x.value,"selection-mode":"multiple","data-key":"name"},{default:r(()=>[o(t(y),{"selection-mode":"multiple",frozen:!0,style:{width:"3rem"}}),o(t(y),{header:e.$t("g.extensionName"),sortable:"",field:"name"},{body:r(n=>[_(h(n.data.name)+" ",1),t(a).isCoreExtension(n.data.name)?(u(),p(t(k),{key:0,value:"Core"})):(u(),p(t(k),{key:1,value:"Custom",severity:"info"}))]),_:1},8,["header"]),o(t(y),{pt:{headerCell:"flex items-center justify-end",bodyCell:"flex items-center justify-end"}},{header:r(()=>[o(t(V),{icon:"pi pi-ellipsis-h",text:"",severity:"secondary",onClick:s[2]||(s[2]=n=>w.value?.show(n))}),o(t(I),{ref_key:"menu",ref:w,model:B},null,512)]),body:r(n=>[o(t(H),{modelValue:l.value[n.data.name],"onUpdate:modelValue":i(R=>l.value[n.data.name]=R,"onUpdate:modelValue"),disabled:t(a).isExtensionReadOnly(n.data.name),onChange:d},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["selection","value","filters"])]),_:1}))}});export{de as default};
//# sourceMappingURL=ExtensionPanel-B5wIUQFP.js.map
