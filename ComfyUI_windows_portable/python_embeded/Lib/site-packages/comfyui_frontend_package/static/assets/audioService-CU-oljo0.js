var p=Object.defineProperty;var r=(s,c)=>p(s,"name",{value:c,configurable:!0});import{et as l,eu as u}from"./vendor-other-CcUSxTdr.js";import{a as m,y as f}from"./index-UkVvUXbW.js";let i=!1;const T=r(()=>{const s=r((e,t,n)=>{console.error(`Audio Service Error (${e}):`,t,n)},"handleError");return{convertBlobToFileAndSubmit:r(async e=>{const t=`recording-${Date.now()}.wav`,n=new File([e],t,{type:e.type||"audio/wav"}),o=new FormData;o.append("image",n),o.append("subfolder","audio"),o.append("type","temp");const a=await m.fetchApi("/upload/image",{method:"POST",body:o});if(a.status!==200){const d=`Error uploading temp file: ${a.status} - ${a.statusText}`;throw f().addAlert(d),new Error(d)}return`audio/${(await a.json()).name} [temp]`},"convertBlobToFileAndSubmit"),registerWavEncoder:r(async()=>{if(!i)try{await l(await u()),i=!0}catch(e){e instanceof Error&&e.message.includes("already an encoder stored")?i=!0:s("encoder","Failed to register WAV encoder",e)}},"registerWavEncoder"),stopAllTracks:r(e=>{e&&(e.getTracks().forEach(t=>{t.stop()}),e=null)},"stopAllTracks")}},"useAudioService");export{T as u};
//# sourceMappingURL=audioService-CU-oljo0.js.map
