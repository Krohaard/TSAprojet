var S=Object.defineProperty;var b=(n,s)=>S(n,"name",{value:s,configurable:!0});import{bs as x,r as u,o as U,n as $,c as h,d as V,l as C,x as N,bq as a,e as t,f as B,u as E,H as f,p as y,q as _,t as p,A as i,J as T,h as z,s as R}from"./vendor-other-CcUSxTdr.js";import{c as M,z as q,g as A,a as D,s as I}from"./vendor-primevue-D4_dEx5Z.js";import{k as J}from"./vendor-vue-BFtl7jfJ.js";import{a3 as K,b2 as j,bS as H,b6 as O}from"./index-UkVvUXbW.js";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"./vendor-tiptap-BLQhG9Oo.js";const P={class:"flex w-full grow items-center justify-center overflow-auto"},W=x({__name:"BaseViewTemplate",props:{dark:{type:Boolean,default:!1}},setup(n){const s={color:"rgba(0, 0, 0, 0)",symbolColor:"#d4d4d4"},c={color:"rgba(0, 0, 0, 0)",symbolColor:"#171717"},r=u(null);return U(async()=>{K()&&(await $(),j().changeTheme({...n.dark?s:c,height:r.value?.getBoundingClientRect().height??0}))}),(l,d)=>(h(),V("div",{class:E(["flex h-svh w-screen flex-col font-sans",[l.dark?"dark-theme bg-neutral-900 text-neutral-300":"bg-neutral-300 text-neutral-900"]])},[C(t("div",{ref_key:"topMenuRef",ref:r,class:"app-drag h-(--comfy-topbar-height) w-full"},null,512),[[N,a(H)()]]),t("div",P,[B(l.$slots,"default")])],2))}}),F={id:"comfy-user-selection",class:"relative min-w-84 rounded-lg bg-(--comfy-menu-bg) p-5 px-10 shadow-lg"},G={class:"flex w-full flex-col items-center"},L={class:"flex w-full flex-col gap-2"},Q={for:"new-user-input"},X={class:"flex w-full flex-col gap-2"},Y={for:"existing-user-select"},Z={class:"mt-5"},ie=x({__name:"UserSelectView",setup(n){const s=O(),c=J(),r=u(null),l=u(""),d=u(""),w=f(()=>l.value.trim()!==""),k=f(()=>s.users.find(e=>e.username===l.value)?`User "${l.value}" already exists`:""),v=f(()=>k.value||d.value),g=b(async()=>{try{const e=w.value?await s.createUser(l.value):r.value;if(!e)throw new Error("No user selected");await s.login(e),await c.push("/")}catch(e){d.value=e instanceof Error?e.message:JSON.stringify(e)}},"login");return U(async()=>{s.initialized||await s.initialize()}),(e,o)=>(h(),y(W,{dark:""},{default:_(()=>[t("main",F,[o[2]||(o[2]=t("h1",{class:"my-2.5 mb-7 font-normal"},"ComfyUI",-1)),t("div",G,[t("div",L,[t("label",Q,p(e.$t("userSelect.newUser"))+":",1),i(a(M),{id:"new-user-input",modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=m=>l.value=m),placeholder:e.$t("userSelect.enterUsername"),onKeyup:T(g,["enter"])},null,8,["modelValue","placeholder"])]),i(a(q)),t("div",X,[t("label",Y,p(e.$t("userSelect.existingUser"))+":",1),i(a(A),{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=m=>r.value=m),class:"w-full","input-id":"existing-user-select",options:a(s).users,"option-label":"username",placeholder:e.$t("userSelect.selectUser"),disabled:w.value},null,8,["modelValue","options","placeholder","disabled"]),v.value?(h(),y(a(D),{key:0,severity:"error"},{default:_(()=>[z(p(v.value),1)]),_:1})):R("",!0)]),t("footer",Z,[i(a(I),{label:e.$t("userSelect.next"),onClick:g},null,8,["label"])])])])]),_:1}))}});export{ie as default};
//# sourceMappingURL=UserSelectView-tIQVssmq.js.map
